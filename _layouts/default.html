<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="b8QEHwMJDrOGbfsQ9IANzx13dhrTJFSPhwPfyvHis9o" />

    {% seo %}

    <link rel="icon" type="image/png" sizes="32x32" href="{{ '/favicons/favicon-32x32.png' | relative_url }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ '/favicons/favicon-16x16.png' | relative_url }}">
    <link rel="shortcut icon" href="{{ '/favicons/favicon.ico' | relative_url }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ '/favicons/apple-touch-icon.png' | relative_url }}">

    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Roboto+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    {% if page.layout == 'post' %}
    <!-- Prism.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">

    <!-- KaTeX for math -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
    {% endif %}
</head>

<body>
    {% include nav.html %}

    {{ content }}

    {% include footer.html %}

    <button class="scroll-top" id="scrollTop" aria-label="Scroll to top">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
        </svg>
    </button>

    <script src="{{ '/assets/js/main.js' | relative_url }}"></script>

    {% if page.layout == 'post' %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <!-- Add other language components as needed -->

    <script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.min.js"></script>

    <script>
        console.log('KaTeX loaded:', typeof renderMathInElement);
        console.log('Blog content element:', document.getElementById('blog-content'));
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Force Prism highlighting
            Prism.highlightAll();

            // KaTeX rendering
            renderMathInElement(document.getElementById('blog-content'), {
                delimiters: [
                    { left: '$$', right: '$$', display: true },
                    { left: '$', right: '$', display: false },
                    { left: '\\[', right: '\\]', display: true },
                    { left: '\\(', right: '\\)', display: false }
                ],
                throwOnError: false
            });

            // Language labels
            document.querySelectorAll('pre code[class*="language-"]').forEach(code => {
                const pre = code.parentElement;
                const match = code.className.match(/language-(\w+)/);
                if (match && !pre.querySelector('.code-language-label')) {
                    const label = document.createElement('div');
                    label.className = 'code-language-label';
                    label.textContent = match[1];
                    pre.style.position = 'relative';
                    pre.insertBefore(label, code);
                }
            });
        });
    </script>
    {% endif %}
</body>

</html>